---
title: "handoff: the deliberate context reset"
description: "when your ai coding assistant's context window fills up, it's already too late. the /handoff slash command creates a structured HANDOFF.md file. a compass for the next fresh session."
date: "2026-01-27"
tags: ["claude-code", "ai-coding", "context-management", "slash-commands", "ai-agents", "developer-tools", "workflow", "llm", "coding-assistant"]
published: true
---

part of [my ai coding workflow](/posts/ai-coding-workflow). this is how i manage context across sessions without losing momentum.

![passing the baton](https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExdWI2cm84bXg0MDMxdGVvM28wOHkyYjlsbXowam5xN2gzcHV5MnV5ciZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/glqdZPHSpcMNTbhCxs/giphy.gif)

## context is king

everything an ai assistant does well, it does because of context. the CLAUDE.md file, the conversation history, the files it's read, the errors it's seen.. all of it compounds into understanding.

a fresh claude session knows nothing about your project. it's starting from scratch. but a claude session 50k tokens deep knows:

- your architectural decisions
- the bugs you've already fixed
- the patterns you prefer
- why that weird function exists
- what you tried that didn't work

that context is gold. it's the difference between "let me read through everything to understand" and "i know exactly where this goes."

## the problem: context pollution

but context isn't free. every message adds tokens. every file read, every error, every "let me try that again".. it all accumulates.

and here's the thing: **polluted context is worse than no context.**

when your session is full of:
- failed approaches that led nowhere
- long stack traces from early debugging
- files you read but didn't need
- tangent conversations about things you decided not to do

..claude has to wade through all of it to find what matters. the signal-to-noise ratio tanks.

at 90k tokens, you notice it. responses get slower. claude starts referencing things you fixed hours ago. it forgets the current direction.

## the compaction trap

claude code has automatic compaction. it summarizes older context when you're running out of room. sounds great in theory.

but by the time compaction kicks in, you've already lost. the summarization is lossy. nuance disappears. that subtle reason you didn't use redis? gone. the edge case in the cypher query? compressed away.

the conversation *feels* continuous but the understanding has holes.

worse: you don't notice until you hit a wall. "wait, we already discussed this" becomes "why doesn't it remember?"

## the solution: deliberate handoff

instead of letting context degrade, i create a deliberate checkpoint. the `/handoff` command generates a `HANDOFF.md` file. a compass for the next fresh session.

it's not a transcript. it's not a summary. it's **actionable context**. exactly what the next session needs to continue the work.

<Mermaid chart={`
flowchart LR
    A["Session 1<br/>(90k tokens)"] --> B["/handoff"]
    B --> C["HANDOFF.md"]
    C --> D["/clear"]
    D --> E["Fresh Session<br/>(0 tokens)"]
    E --> F["Read HANDOFF.md"]
    F --> G["Continue work"]
`} />

the key insight: **start a fresh session with perfect context, instead of continuing a degraded one.**

## what's in a handoff

the structure is designed for quick parsing:

```markdown
# Handoff: Client Lookup Enhancement

> **Date:** 2026-01-27
> **Session:** Implemented 3.17 Client Query â†’ Add `region` + `notes` fields

---

## Context
Dunder Mifflin Infinity backend.
Implementing regional client lookup to replace keyword-based search.

---

## Just Completed
- Implemented `get_regional_clients()` query method with filters
- Added `region_code` parameter to `create_client_record()`
- Fixed SQL syntax and datetime conversion
- **29 tests pass**

### Key Files Changed
| File | Purpose |
|------|---------|
| `src/app/models/client.py` | NEW - `ClientResult` model |
| `src/app/services/sales.py` | Added `region_code` param |

---

## Next Up
**Add `region` and `notes` fields to Client record**

### Starting Point
1. Update DATABASE_SCHEMA.md
2. Update `src/app/services/sales.py:160`
3. Add tests

---

## Gotchas
1. **SQL ON CONFLICT** must come immediately after INSERT
2. **DateTime** needs conversion: `dt.isoformat()`

---

## Quick Commands
\`\`\`bash
uv run pytest tests/services/test_sales.py -v
\`\`\`

---

## References
- [Story 3.17](link) - Client query (DONE)
- [Story 5.5](link) - Regional lookup + filtering
```

## why this works

### 1. just completed

not everything you did. just what matters for continuity. the next session doesn't need to know about the 4 approaches you tried that failed. it needs to know what succeeded.

### 2. key files changed

a table, not prose. the next session can immediately read these files and have the context it needs.

### 3. next up

the specific task to continue. not "keep working on the feature". the exact next step. "add `reason` and `raw_text` fields to SIGNALS edge."

### 4. starting point

line numbers, file paths, exact commands. eliminates the "where was i?" phase.

### 5. gotchas

this is the secret sauce. every session discovers things: syntax quirks, api behaviors, debugging tricks. without this section, the next session rediscovers them.

"cypher ON CREATE SET must come immediately after MERGE". this took 20 minutes to figure out. the next session gets it in one line.

### 6. quick commands

copy-paste ready. no "how do i run the tests again?"

## when to handoff

i use `/handoff` when:

- **i'm at 60-70k tokens.** well before automatic compaction
- **i'm switching tasks.** different feature, different mental model
- **i'm ending for the day.** tomorrow is a fresh session anyway
- **the conversation got messy.** lots of backtracking, dead ends, tangents

the goal is to handoff while you still have good context, not after it's degraded.

## the command

it lives at `.claude/commands/handoff.md`:

```markdown
# Handoff

Generate a concise handoff document for the next Claude session.

## Instructions

Create or update `HANDOFF.md` at the repo root with a brief compass:

1. **Gather context** by running:
   - `git status` - uncommitted changes
   - `git log --oneline -10` - recent commits
   - check for in-progress stories or tasks

2. **Write HANDOFF.md** with these sections:
   - context (1-2 sentences)
   - just completed (bullet list)
   - key files changed (table)
   - next up (specific task)
   - starting point (exact steps)
   - gotchas (traps to avoid)
   - quick commands (copy-paste ready)
   - references (links to docs)

3. **Keep it short.** compass, not novel. ~100-150 lines max.

4. **Be specific.** exact file paths, line numbers, working commands.

5. **Report back** with a one-liner to start the next session.
```

the key instruction: "this is a compass, not a novel."

## starting the next session

the handoff ends with a one-liner:

```
Read HANDOFF.md then add reason and raw_text fields to SIGNALS edge
```

paste that into a fresh session. claude reads the handoff, immediately has context, and starts on the exact task. no warmup, no re-explaining, no "let me understand what you're working on."

the fresh session has:
- clean context window (no pollution)
- perfect starting knowledge (from HANDOFF.md)
- clear direction (the one-liner task)

## the mental model

think of sessions like relay races:

**without handoff:** each runner starts from the beginning of the track, getting more tired as they run longer distances. by the end, they're stumbling.

**with handoff:** each runner starts fresh, but exactly where the last one stopped. the baton carries the context.

the context window isn't a limitation to fight against. it's a signal to work with. when it starts filling up, that's not a problem. it's a prompt to checkpoint and reset.

## related

- [my ai coding workflow](/posts/ai-coding-workflow). the full system
- [vibecheck](/posts/vibecheck). auditing implementation against the plan
- [multi-llm plan critique](/posts/multi-llm-plan-critique). pre-implementation validation

---

context is king. but a king that's exhausted and confused isn't ruling anything. give your next session a fresh start with perfect context. that's the handoff.
